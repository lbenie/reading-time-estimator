language: node_js
dist: trusty
node_js:
- 8
- 9
- 10
cache:
  yarn: true
  directories:
  - node_modules
stages:
- test
- npm release
notifications:
  email:
    on_success: change
    on_failure: always
jobs:
  include:
  - stage: test
    script: yarn test
    if: type IN (push, pull_request)
  - stage: npm release
    if: tag IS present
    deploy:
      skip_cleanup: true
      provider: npm
      email: lucien.benie@gmail.com
      script: yarn build
      api_key:
        secure: InxJjiLykPyGNkbBUmbzazO0iQtPgM3h3SfFtGRw7sXV4eUQZlA5HqGQH25xUTTQwBESkS4+qv+4L5JIa3rYvqVPjAj/DvHGvmlMB4TXPklUSnMCTBhjzYgzj58/WzzVfAg8hVWHkvMdnGlfVVzGQxxDFK4WizgP3SZpUtj71l9QpNqMfidBrlnwc4E9xQMNw3TTQjnwuT/VYB/j28X6+7i1hqLKMblk7ql1IyZoeZ7GRxn4zyGp6tLsK0Kpjz2qowwb5l8ap9faRWVUx327oFAofj9NRZj/8IZvLawNV4eNshgBlFv2tkfMXD/oFPbxLZAxf2tQgJQbsZ/4CIZRxquOPXvsr5Bk3Xj0zVaO1FopitrgQzsWdbtv5T0ovOTYdXffe5k7TuiJraupVlAZdjzlkIlHVFevzYVWhD3aVz16DDRrBHyyibG/3ZO3QjBaH9OxRJxdNU8zAvQSrgIxnNX1XMRGGzVarmDJo8/h07yfUXRKaoNCwh5iLI6YvyUWWnDHno9gjpryJHt1MweTLWxvogxW5UGybHG9DpaPQW6p7ven1GpV3kkDS/2IFmH1fidGF4MGsZbLzmsMmUnVFueJFPGomkJ9IqS+qNdyIr902M8ZpqB49p6lYDg7QsCbAwIM5sdWYIdMQq5VtmQmnG37HvvX868qPo3FkEOJgrg=
      on:
        tags: true
        repo: lbenie/reading-time-estimator
env:
  global:
  - secure: 6GvtG1r3JoriLPOwLy9dc22Yvyo74cSEmZgnethQTT/8mxWOPQUZNcfuqCSYLWSyDK1yVN/xJqfIN2lKjxW2G8X3PW3hci1+f6JwdTpZ4PZprsS0gRMkUg/nFPE6Xdr9kKAyS+8bMgLk1KhqqDnwmm8DZUkq4Pg02YWYypxYXaXIxRuDfSrgeqgN8I7URt2FTS+hdrX5vRfoPJ6DvzrL7CUi+G1CyjGgDYzjTGNxePB39m71sV944j1XFwnsgNDzJBIuyQEZ8Zs2R9SVp24HGEDIQyscDg8zg07KqJt/A20NAgOtb6hqHERDR7WUNDsKKuQPgrDQJXlBnYJebvoYPWO/4gRZcw58VNwgMZrZMjOkkmjSvHiGH0iQAPgav1N3RRx3uW+x4NMnGrovDIUAV7hydBxYJcSTzyK23d8XQnL6apGuVZUULQ776mAZ7E0TN8etZcxZy4rEEzSmfJKmRphXUNtJZCSyxEL0VjA/CYOJtylhRYarxL/tJrbUu66KOrG3gj9B6ADpbNtbSSEJpyutth0iUtu3vvbQ5Ud23WK59vQMDBvnN/ngGyzjgTbFV1Kv1ket/e2wytwMIsYhHpBF5s1fgU0EvNXQkUfJov0k2aTY2W3WyPBZ9TDWVGmQnAXkgj8OSL7dRjeAeF115nQFiWhqYM8iGRKJFdnxQtY=
